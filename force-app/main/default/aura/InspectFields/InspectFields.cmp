<aura:component controller="BuilderApex">
    <aura:attribute name="myData" type="Object[]"/>
    <aura:attribute name="myColumns" type="List"/>
    <aura:attribute name="loaded" type="Boolean" default="true"/>
    <aura:attribute name="stage" type="String" default=""/>

    <aura:handler name="init" value="{!this}" action="{!c.init}"/>
    <aura:handler name="changeObject" event="c:ChangeObject" action="{!c.getFields}"/>
    
    {!v.stage}

    <c:InspectObjects/>
    
    <div class="exampleHolder">
        <aura:if isTrue="{!v.loaded}">
            <div>
                <lightning:datatable 
                    data="{!v.myData}" 
                    columns="{!v.myColumns}"
                    keyField="Id" 
                    class="table"
                ></lightning:datatable>
            </div>            
            <aura:set attribute="else">
                <lightning:spinner alternativeText="Loading"/>
            </aura:set>
        </aura:if>
    </div>        
</aura:component>